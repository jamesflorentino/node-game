((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};this.Wol={Models:{},Collections:{},Views:{},Events:{},Ui:{}},Wol.Events.EventDispatcher=function(){function a(){}return a.prototype.bind=function(a,b){var c;this.e||(this.e={}),(c=this.e)[a]||(c[a]=[]),this.e[a].push(b)},a.prototype.unbind=function(a,b){var c;if(!this.e)return;if(arguments.length===0){this.e={};return}if(!this.e[a])return;if(!b){delete this.e[a];return}c=this.e[a].indexOf(b),this.e[a].splice(c,1)},a.prototype.trigger=function(a,b){if(!this.e)return;if(!this.e[a])return;return this.e[a].forEach(function(a){if(a!=null)return a(b)})},a}(),Wol.Models.Model=function(a){function c(a){this.attributes={},this.id="".randomId(),a!=null&&window.implement(this.attributes,a),this.init(a)}return b(c,a),c.prototype.init=function(a){},c.prototype.set=function(a){return window.implement(this.attributes,a),this},c.prototype.get=function(a){return this.attributes||(this.attributes={}),this.attributes[a]},c}(Wol.Events.EventDispatcher),Wol.Views.View=function(a){function c(a){window.implement(this,a),this.init(a)}return b(c,a),c.prototype.set=function(a){return this.model||(this.model=new Wol.Models.Model),this.model.set(a),this},c.prototype.get=function(a){return this.model||(this.model=new Wol.Models.Model),this.model.get(a)},c}(Wol.Events.EventDispatcher),Wol.Collections.Collection=function(a){function c(a){this.collections=[],this.total=0;if(a===void 0)return;if(a.length===void 0)return;return}return b(c,a),c.prototype.add=function(a){var b;if(a instanceof Array){a.forEach(function(a){this.collections.push(a)});return}return b=a,this.collections.push(b),this},c.prototype.find=function(a){var b;return b=this.collections.filter(a),b[0]},c}(Wol.Events.EventDispatcher)})).call(this),Wol.AssetList=[{name:"background",url:"/images/background.png"},{name:"terrain",url:"/images/terrain.png"},{name:"hex",url:"/images/hex.png"},{name:"hex_move",url:"/images/hex_move.png"},{name:"marine",url:"/images/marine.png"},{name:"hex_act",url:"/images/hex_act.png"},{name:"hex_act_target",url:"/images/hex_act_target.png"}],Wol.Settings={terrainX:-60,terrainY:150,columns:8,rows:8},Wol.UnitNames={MARINE:"lemurian_marine"},Wol.UnitStats={},Wol.UnitStats[Wol.UnitNames.MARINE]={id:"".randomId(10),name:"Lemurian Marine",stats:{baseHealth:100,baseEnergy:10,health:80,energy:5,actions:4,moveRadius:3,charge:100}},function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};window.DEBUG=!1,a="http://localhost:1337",this.Wol,this.io,Wol.Models.GameModel=function(b){function d(){d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.init=function(){return this.events={},this.rooms=new Wol.Collections.Collection,this.users=new Wol.Collections.Collection,this.user=new Wol.Models.Model},d.prototype.connect=function(){return this.socket=io.connect(a),this.bindEvents(),this.setUserName(["James","Doris","Chloe","Blaise","Rico","Patrick"].random())},d.prototype.bindEvents=function(){var a=this;return this.socket.on("connect",function(b){a.trigger("connect",b)}),this.socket.on("disconnect",function(b){a.trigger("disconnect",b)}),this.socket.on("setUserName",function(b){a.user.set({id:b.userid,name:b.username}),a.trigger("setUserName",b)}),this.socket.on("joinRoom",function(b){a.trigger("joinRoom",b)}),this.socket.on("addUser",function(b){a.trigger("addUser",b),a.users.add(new Wol.Models.Model(b))}),this.socket.on("startGame",function(b){return a.trigger("startGame",b)}),this.socket.on("addUnit",function(b){a.trigger("addUnit",b)}),this.socket.on("moveUnit",function(b){return a.trigger("moveUnit",b)})},d.prototype.setUserName=function(a){return this.socket.emit("setUserName",{userName:a}),this},d}(Wol.Models.Model)}.call(this),function(){this.Wol.AssetLoader=function(){function a(){var a=this;this.__list=[],this.events={load:function(b){return a.onImageLoad(b)}};return}return a.prototype.get=function(a){if(this.__list[a]!=null)return this.__list[a].file},a.prototype.download=function(a,b){var c=this;this.list=a,this.finished=b,this.loaded=0,this.list.forEach(function(a){var b;b=new Image,b.addEventListener("load",c.events.load),b.src=a.url,a.file=b,a.type="image",c.__list[a.name]=a})},a.prototype.onImageLoad=function(a){this.loaded++,this.loaded>=this.list.length&&this.finished!=null&&this.finished(this.list)},a}()}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=Wol.Ui,a.CancelButton=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.init=function(){var a=this;this.el=$("#cancelButton"),this.el.click(function(){return a.trigger("cancel"),a.hide()})},b.prototype.show=function(a,b){this.el.addClass("active");if(a===void 0)return;this.el.css({top:b,left:a})},b.prototype.hide=function(){this.el.removeClass("active")},b}(Wol.Views.View),a.CommandList=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.init=function(){var a=this;this.el=$("#commandList"),this.cancelButton=this.el.find(".cancel"),this.list=this.el.find(".list"),this.list.empty(),this.tpl=function(a){return"<li>\t\t\t\t<span class='index'>"+a.index+"</span>\t\t\t\t<span class='command name'>"+a.name+"</span>\t\t\t\t<span class='indicator'></span>\t\t\t</li>"},this.cancelButton.click(function(){return a.trigger("cancel"),a.hide()})},b.prototype.setCommands=function(a){var b,c,d=this;b=this.list,c=this.tpl,b.empty(),a.forEach(function(a,e){var f,g,h;return g=a.get("name"),f=a.get("code"),h=$(c({index:e+1,name:g})),h.click(function(){d.trigger("act",a)}),b.append(h)})},b.prototype.show=function(a,b){this.el.removeClass("hidden"),this.el.css({top:b,left:a}),this.el.addClass("active")},b.prototype.hide=function(){this.el.addClass("hidden")},b}(Wol.Views.View),a.UnitInfo=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.init=function(){this.el=$("#unitInfo"),this.hp=this.el.find(".health"),this.ep=this.el.find(".energy"),this.ap=this.el.find(".action"),this.tp=this.el.find(".turn"),this.pic=this.el.find(".portrait"),this.title=this.el.find(".name"),this.hp.data("oWidth",this.hp.find(".bar").width()),this.ep.data("oWidth",this.ep.find(".bar").width()),this.ap.data("oWidth",this.ap.find(".bar").width()),this.tp.data("oWidth",this.tp.find(".bar").width())},b.prototype.show=function(a){var b;this.title.text(a.name),this.updateBar(this.hp,a.health,a.maxHealth),this.updateBar(this.ep,a.energy,a.maxEnergy),this.updateBar(this.ap,a.actions,a.maxActions),this.updateBar(this.tp,a.charge,100),b=Math.round(a.charge*100)/100,this.tp.find(".value").text(""+b+"%"),this.el.removeClass(),this.el.addClass(a.type)},b.prototype.updateBar=function(a,b,c){var d,e,f,g;e=a.data("oWidth"),d=a.find(".bar"),f=a.find(".value"),f.text(""+b+"/"+c),g=b/c*e,d.width(g)},b}(Wol.Views.View),a.TurnList=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.init=function(){this.el=$("#turnList"),this.logs=this.el.find(".logs"),this.template=function(){return $("#tpl-turnlist").html()}},b.prototype.generate=function(a){var b=this;this.logs.empty(),a.forEach(function(a){var c;return c=$(b.template()),c.find(".unit").text(a.name),b.logs.append(c)})},b}(Wol.Views.View),a.ActionMenu=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.init=function(){var a=this;this.el=$("#actionMenu"),this.skip=this.el.find(".skip"),this.move=this.el.find(".move"),this.act=this.el.find(".act"),this.cancel=this.el.find(".cancel"),this.move.bind("click",function(){return a.showMove()}),this.skip.bind("click",function(){return a.skipMove()}),this.cancel.bind("click",function(){return a.cancelAction()}),this.act.bind("click",function(){return a.showCommands()})},b.prototype.show=function(a,b){this.el.removeClass(),this.el.addClass("active"),this.el.css({top:b,left:a})},b.prototype.hide=function(){this.el.removeClass("active")},b.prototype.showMove=function(){this.trigger("move"),this.showCancel()},b.prototype.skipMove=function(){this.trigger("skip")},b.prototype.showCancel=function(){return this.el.addClass("cancel")},b.prototype.cancelAction=function(){this.el.removeClass("cancel"),this.trigger("cancel")},b.prototype.showCommands=function(){this.trigger("act"),this.showCancel()},b}(Wol.Views.View),a.Confirm=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.init=function(){var a=this;return this.el=$("#actionConfirm"),this.confirmButton=this.el.find(".confirm"),this.cancelButton=this.el.find(".cancel"),this.cancelButton.bind("click",function(){return a.cancel()}),this.confirmButton.bind("click",function(){return a.confirm()})},b.prototype.show=function(a,b){this.el.removeClass(),this.el.css({top:b,left:a}),this.el.addClass("active")},b.prototype.hide=function(){this.el.removeClass("active")},b.prototype.confirm=function(){this.trigger("confirm")},b.prototype.cancel=function(){this.hide(),this.trigger("cancel")},b}(Wol.Views.View)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=Object.prototype.hasOwnProperty,p=function(a,b){function d(){this.constructor=a}for(var c in b)o.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};this.Wol,d=function(a,b,d,e){var k,l,m;d==null&&(d=1),e==null&&(e=0),m=[],k=1+e;while(k<d+1)l=c(a,b,k,!0),m=m.concat(l),l=h(a,b,k,!0),m=m.concat(l),l=i(a,b,k,!0),m=m.concat(l),l=j(a,b,k,!0),m=m.concat(l),l=g(a,b,k,!0),m=m.concat(l),l=f(a,b,k,!0),m=m.concat(l),k++;return m},b=function(a,b,d,e){var k,l,m;d==null&&(d=1),e==null&&(e=0),m=[],k=1+e;while(k<d+1)l=c(a,b,k),m=m.concat(l),l=h(a,b,k,!0),m=m.concat(l),l=i(a,b,k,!1),m=m.concat(l),l=j(a,b,k,!1),m=m.concat(l),l=g(a,b,k,!0),m=m.concat(l),l=f(a,b,k),m=m.concat(l),k++;return m},e=function(a,b,d,e){var f,g,h;d==null&&(d=1),e==null&&(e=0),h=[],f=1+e;while(f<d+1)g=c(a,b,f,!0),h=h.concat(g),g=j(a,b,f,!0),h=h.concat(g),f++;return h},a=function(a,b,d,e){var k,l,m;d==null&&(d=1),e==null&&(e=0),m=[],k=1+e;while(k<d+1)l=h(a,b,k),m=m.concat(l),l=f(a,b,k),m=m.concat(l),l=i(a,b,k),m=m.concat(l),l=g(a,b,k),m=m.concat(l),l=j(a,b,k),m=m.concat(l),l=c(a,b,k),m=m.concat(l),k++;return m},c=function(a,b,c,d){var e,f,g,h,i;g=[],e=0,f=c*.5,f=Math.floor(f);while(e<c){i=b+e,h=a+c-Math.ceil(e*.5),b%2&&i%2===0&&h++,g.push({x:h,y:i}),e++;if(d)break}return g},j=function(a,b,c,d){var e,f,g,h,i;g=[],e=0,f=c*.5,f=Math.floor(f);while(e<c){i=b-e,h=a-c+Math.floor(e*.5),b%2&&i%2===0&&h++,g.push({x:h,y:i}),e++;if(d)break}return g},g=function(a,b,c,d){var e,f,g,h,i;g=[],e=0,f=c*.5,f=Math.ceil(f);while(e<c){h=a+e-f,i=b-c,b%2&&c%2&&h++,g.push({x:h,y:i});if(d)break;e++}return g},i=function(a,b,c,d){var e,f,g,h,i;g=[],e=0,f=c*.5,f=Math.ceil(f);while(e<c){i=b+c-e,h=a-e-f+Math.ceil(e*.5),i%2===0&&b%2&&c%2&&h++,c%2===0&&b%2===0&&i%2&&h--,g.push({x:h,y:i});if(d)break;e++}return g},f=function(a,b,c,d){var e,f,g,h,i;g=[],e=0,f=c*.5,f=Math.floor(f);while(e<c){i=b-c+e,h=a+e+f-Math.floor(e*.5),i%2===0&&b%2&&c%2&&h++,c%2===0&&b%2===0&&i%2&&h--,g.push({x:h,y:i}),e++;if(d)break}return g},h=function(a,b,c,d){var e,f,g,h,i;g=[],e=0,f=c*.5,f=Math.floor(f);while(e<c){h=a-e+f,i=b+c,b%2&&c%2&&h++,g.push({x:h,y:i}),e++;if(d)break}return g},n=126,k=86,l=63,m=22,Wol.Views.HexTile=function(b){function c(){c.__super__.constructor.apply(this,arguments)}return p(c,b),c.prototype.init=function(){this.__base=new Bitmap(Wol.getAsset("hex")),this.__move=new Bitmap(Wol.getAsset("hex_move")),this.__act=new Bitmap(Wol.getAsset("hex_act")),this.__target=new Bitmap(Wol.getAsset("hex_act_target")),this.el=new Container,this.tileID=""+this.tileX+"|"+this.tileY,this.el.x=n*this.tileX,this.el.y=(k-m)*this.tileY,this.width=n,this.height=k,this.tileY%2&&(this.el.x+=l),this.x=this.el.x+n*.5,this.y=this.el.y+k*.5,this.el.addChild(this.__base),this.el.addChild(this.__act),this.el.addChild(this.__move),this.el.addChild(this.__target),this.hide(),this.cost=1},c.prototype.select=function(a){this.show(),this.selected=!0,this.__hideTiles();switch(a){case"act":this.__target.visible=!0;break;default:this.__move.visible=!0}},c.prototype.deselect=function(){return this.selected=!1,this.__base.visible=!0,this.__move.visible=!1,this.__target.visible=!1},c.prototype.hide=function(){this.el.visible=!1,this.selected=!1,this.el.onClick=null},c.prototype.__hideTiles=function(){this.__move.visible=!1,this.__base.visible=!1,this.__act.visible=!1,this.__target.visible=!1},c.prototype.show=function(a){a==null&&(a="move"),this.el.visible=!0,this.__hideTiles();switch(a){case"act":this.__act.visible=!0;break;default:this.__base.visible=!0}},c.prototype.addUnit=function(a){this.units||(this.units=[]),this.units.push(a)},c.prototype.removeUnit=function(a){this.units||(this.units=[]),this.units.splice(this.units.indexOf(a),1)},c.prototype.getAdjacentHexPoints=function(b){var c,d;return b||(b={}),c=b.radius||1,d=a(this.tileX,this.tileY,c),d||(d=[])},c}(Wol.Views.View)}.call(this),function(){var a,b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};this.Wol,c=Wol.Views,a={marine:{images:["marine.png"],animations:{onMoveEnd:[17,23],onDieStart:[64,91],onDefend:[55,59],onMoveStart:[1,3],onDefendEnd:[60,63],all:[0,0],onMove:[4,16],onDefendStart:[52,54],onAttackStart:[24,51]},frames:{regX:0,width:112,regY:0,height:97,count:92}}},Wol.Units={getAnimation:function(a,b){var c,d,e;return d=this.getFrameData(a,b),e=new SpriteSheet(d),c=new BitmapAnimation(e),c},getFrameData:function(b,c){var d;return d=a[b],d.images=c,d},createUnitByType:function(a){var b;b=null;switch(a){case"marine":b=new Wol.Views.Marine;break;default:b=new Wol.Views.Unit}return b}},b=Wol.Units,Wol.Views.Unit=function(a){function b(){this.moveThroughTiles=d(this.moveThroughTiles,this),b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.init=function(){return this.el=new Container,this.walkSpeed=100,this.commands=new Wol.Models.Commands,this},b.prototype.resetCharge=function(){return this.model.set({charge:0})},b.prototype.spawn=function(){var a,b;return a=this.get("tileX"),b=this.get("tileY"),this.setTilePosition(a,b),this.resetCharge(),this},b.prototype.stand=function(){return this.onStand()},b.prototype.move=function(a){var b;return this.get("tileX")===void 0&&this.get("tileY")===void 0&&(this.setTilePosition(a[0].tileX,a[0].tileY),this.el.x=a[0].x,this.el.y=a[0].y,b=a.splice(0,1),console.log(a,b)),this.moveThroughTiles(a),this},b.prototype.defend=function(){return this.onDefend()},b.prototype.hit=function(){return this.onHit()},b.prototype.performCommand=function(a){return this.onCommand(a)},b.prototype.moveThroughTiles=function(a){var b,c,d=this;return this.onMoveStart(),b=this.el.x,c=Tween.get(this.el),a.forEach(function(a,e){return c=c.call(function(){return d.el.scaleX=a.x>b?1:-1,b=a.x,d.onMove(),d}),c=c.to({x:a.x,y:a.y},d.walkSpeed),d.setTilePosition(a.tileX,a.tileY),d}),c=c.call(function(){return d.onMoveEnd()}),this},b.prototype.flip=function(a){return this.el.scaleX=a==="left"?-1:1,this},b.prototype.setTilePosition=function(a,b){return this.set({tileX:a,tileY:b}),this.el.index=a+b,this},b.prototype.play=function(a){return this.animation||this,this.animation.gotoAndPlay(a),this},b.prototype.onStand=function(){return this},b.prototype.onMove=function(){return this.trigger("move")},b.prototype.onMoveStart=function(){return this},b.prototype.onMoveEnd=function(){return this.trigger("moveEnd")},b.prototype.onSpawn=function(){return this},b.prototype.onHit=function(){return this},b.prototype.onDefend=function(){return this},b.prototype.onCommand=function(a){return this},b}(Wol.Views.View),Wol.Views.AnimatedUnit=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return f(c,a),c.prototype.init=function(){return c.__super__.init.call(this),this.setAnimation(),this.setAnimationEvents(),this.onSpawn(),this},c.prototype.setAnimation=function(){return this.animation=b.getAnimation(this.frameDataName,this.images),this.el.addChild(this.animation),this.animation.gotoAndStop(0),this},c}(Wol.Views.Unit),Wol.Views.Marine=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.setAnimation=function(){return this.walkSpeed=600,this.frameDataName="marine",this.images=[Wol.getAsset("marine")],this.commands.add({name:"Pulse Rifle Shot",code:"marine_pulserifleshot"}),this.el.regX=30,this.el.regY=80,b.__super__.setAnimation.call(this)},b.prototype.setAnimationEvents=function(){var a=this;return this.animation.onAnimationEnd=function(b,c){switch(c){case"onMoveStart":b.gotoAndPlay("onMove");break;case"onMove":b.gotoAndPlay("onMove");break;case"onAttackStart":a.trigger("attackEnd");break;case"onDefend":a;break;case"onDefendStart":break;default:b.gotoAndStop(0)}return a},this},b.prototype.onSpawn=function(){return this.animation.gotoAndStop(0)},b.prototype.onStand=function(){if(this.defending===!0)return this.animation.gotoAndPlay("onDefendEnd"),this.defending=!1},b.prototype.onMoveStart=function(){return this.animation.gotoAndPlay("onMoveStart")},b.prototype.onMoveEnd=function(){return this.animation.gotoAndPlay("onMoveEnd"),b.__super__.onMoveEnd.call(this)},b.prototype.onHit=function(){return this.animation.gotoAndPlay("onDefend")},b.prototype.onDefend=function(){return this.defending=!0,this.animation.gotoAndPlay("onDefendStart")},b.prototype.onCommand=function(a){var b,c=this;switch(a){case"marine_pulserifleshot":this.play("onAttackStart"),b=4;while(b-->0)after(200*b,function(){return c.trigger("attack")})}return this},b}(Wol.Views.AnimatedUnit)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};this.Wol,Wol.Views.HexContainer=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.init=function(){this.el=new Container,this.__dict=[]},c.prototype.generate=function(a,b){var c,d,e;e=0;while(e<b){d=0;while(d<a)c=new Wol.Views.HexTile({tileX:d,tileY:e}),c.show(),this.__dict["tile_"+d+"_"+e]=c,this.el.addChild(c.el),d++;e++}return this},c.prototype.getHexByTilePosition=function(a,b){var c;return c=this.__dict["tile_"+a+"_"+b],c},c.prototype.getTilesByPoints=function(a){var b,c=this;return b=[],a.forEach(function(a){var d;return d=c.getTileByPoint(a),b.push(d)}),b},c.prototype.getTileByPoint=function(a){return this.__dict["tile_"+(a.tileX||a.x)+"_"+(a.tileY||a.y)]},c}(Wol.Views.View)}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};this.Wol,Wol.Views.UnitContainer=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.init=function(){this.el=new Container,this.units=[]},c.prototype.createUnitByCode=function(a){var b;b=null;switch(a){case Wol.UnitNames.MARINE:b=new Wol.Views.Marine}return b},c.prototype.addUnit=function(a){return this.el.addChild(a.el),this.units.push(a),this},c.prototype.getUnitById=function(a){var b;return b=this.units.filter(function(b){return b.get("unitId")===a}),b[0]},c}(Wol.Views.View)}.call(this),function(){this.Wol,Wol.HexLineContainer=function(){function a(){this.el=new Container,this.lines=new Shape,this.circle=new Shape,this.el.addChild(this.lines),this.el.addChild(this.circle)}return a.prototype.start=function(a,b){var c;return c=this.lines.graphics,c.setStrokeStyle(5),c.beginStroke(Graphics.getRGB(0,255,255)),c.moveTo(a,b),this.marker(a,b)},a.prototype.to=function(a,b){return this.lines.graphics.lineTo(a,b),this.marker(a,b)},a.prototype.marker=function(a,b){var c,d,e,f,g;return e=40,d=20,c=this.circle.graphics,c.beginFill(Graphics.getRGB(0,255,255)),f=a-e*.5,g=b-d*.5,c.drawEllipse(f,g,e,d)},a.prototype.clear=function(){return this.lines.graphics.clear(),this.circle.graphics.clear()},a}()}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};this.Wol,Wol.Models.Command=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.init=function(){var a;if(!this.get("code"))throw"command code unspecified";if(!this.get("name"))throw"command name unspecified";a={},this.get("radius")||(a.radius=1),this.get("type")||(a.type="radius"),a.id=this.get("code"),this.set(a)},c}(Wol.Models.Model),Wol.Models.Commands=function(a){function c(){c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.init=function(){this.list=[]},c.prototype.add=function(a){var b;b=new Wol.Models.Command(a),this.list.push(b)},c.prototype.getCommands=function(){return this.list},c}(Wol.Models.Model)}.call(this),function(){var a,b,c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);return e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype,a},e=function(a,b){return function(){return a.apply(b,arguments)}};this.Wol,window.debug=!0,b=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.init=function(){var a=this;return this.canvas=document.getElementById("game").getElementsByTagName("canvas")[0],this.canvas.width=980,this.canvas.height=700,this.stage=new Stage(this.canvas),this.pause(),Ticker.addListener({tick:function(){return a.render()}})},b.prototype.useRAF=function(){return Ticker.useRAF=!0,Ticker.setFPS(30)},b.prototype.play=function(){return Ticker.setPaused(!1),this},b.prototype.pause=function(){return Ticker.setPaused(!0),this},b.prototype.render=function(){return this.stage.update(),this},b}(Wol.Views.View),a=function(a){function b(){b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.init=function(){var a=this;return b.__super__.init.call(this),this.assetLoader=new Wol.AssetLoader,Wol.getAsset=function(b){return a.assetLoader.get(b)},this.elReady(),this},b.prototype.buildUserInterface=function(){return this.elements={background:new Bitmap(Wol.getAsset("background")),terrain:new Bitmap(Wol.getAsset("terrain")),hexContainer:new Wol.Views.HexContainer,unitContainer:new Wol.Views.UnitContainer,viewport:new Container},this.elements.viewport.addChild(this.elements.terrain),this.elements.viewport.addChild(this.elements.hexContainer.el),this.elements.viewport.addChild(this.elements.unitContainer.el),this.ui={cancelButton:new Wol.Ui.CancelButton,commandList:new Wol.Ui.CommandList,unitInfo:new Wol.Ui.UnitInfo,turnList:new Wol.Ui.TurnList,actionMenu:new Wol.Ui.ActionMenu},this.stage.addChild(this.elements.background),this.stage.addChild(this.elements.viewport),this},b.prototype.setConfigurations=function(){return this.elements.viewport.x=Wol.Settings.terrainX,this.elements.viewport.y=Wol.Settings.terrainY,this.elements.hexContainer.generate(Wol.Settings.columns,Wol.Settings.rows),this},b.prototype.debug=function(){return this},b}(b),Wol.Views.GameView=function(a){function b(){this.moveUnit=e(this.moveUnit,this),this.addUnit=e(this.addUnit,this),this.startGame=e(this.startGame,this),this.assetsReady=e(this.assetsReady,this),b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.elReady=function(){this.assetLoader.download(Wol.AssetList,this.assetsReady)},b.prototype.assetsReady=function(){return this.buildUserInterface().setConfigurations(),this.useRAF(),this.model.bind("startGame",this.startGame),this.model.bind("addUnit",this.addUnit),this.model.bind("moveUnit",this.moveUnit),this.model.connect(),this.startGame(),this},b.prototype.startGame=function(){this.play()},b.prototype.addUnit=function(a){var b,c,d;return console.log("addUnit",a),d=a.unitId,c=a.unitCode,b=this.elements.unitContainer.createUnitByCode(c),b.set(a),this.elements.unitContainer.addUnit(b),this},b.prototype.moveUnit=function(a){var b,c,d;return d=a.unitId,c=this.elements.unitContainer.getUnitById(d),b=this.elements.hexContainer.getTilesByPoints(a.points),c.move(b),this},b}(a)}.call(this),function(){$(function(){var a,b;return a=new Wol.Models.GameModel,b=new Wol.Views.GameView({model:a})})}.call(this)